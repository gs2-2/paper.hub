<!doctype>
<head>
	<link rel="stylesheet" type="text/css" href="vendor/jquery-ui/themes/base/all.css">
	<link rel="stylesheet" type="text/css" href="vendor/rickshaw/rickshaw.css">
	<link rel="stylesheet" type="text/css" href="vendor/rickshaw/src/css/graph.css">
	<link rel="stylesheet" type="text/css" href="vendor/rickshaw/src/css/detail.css">
	<link rel="stylesheet" type="text/css" href="vendor/rickshaw/src/css/legend.css">

	<script src="js/moment.js"></script>
	<script src="vendor/rickshaw/vendor/d3.min.js"></script>
	<script src="vendor/rickshaw/vendor/d3.layout.min.js"></script>

	<script src="vendor/jquery/dist/jquery.min.js"></script>
	<script src="vendor/jquery-ui/jquery-ui.min.js"></script>


	<script src="vendor/rickshaw/rickshaw.js"></script>
	<script src="vendor/rickshaw/src/js/Rickshaw.Color.Palette.js"></script>
	
	<style>

		#chart_container{
			width: 100%;
			position: absolute;
			bottom: 0px;			
		}

		#chart{
			position: relative;
			width: 87%;
			left: 2.5%;
			top: 0px;
		}

		#y_Axis{
			position: absolute;
			right: 97.55%;
			top: 0%;
			height: 300px;
		}

		#x_Axis{
			position: absolute;
			left: 0%;
			bottom: 0%;
		}

		#legend_container{
			position: absolute;
			top: 0%;
			right: 0%;
		}

		#slider{
			position: absolute;
			bottom: -10%;
			left: 2.5%;
		}

		#color_chooser{
			position: absolute;
			right: 0%;
			bottom: 0%;
		}
	</style>
</head>
<body>

<div id="chart_container">
	<div id="graph">
		<div id="y_Axis"></div>
		<div id="chart"></div>
		<div id="x_Axis"></div>
	</div>
	<div id="legend_container">
		<div id="smoother" title="Smoothing"></div>
		<div id="legend"></div>
	</div>
	<div id="color_chooser">
		<div id="styles" class="rickshaw_legend" style="height: 60px;"><b>Style</b>
			<ul class="ui-sortable">
				<li id="munin" class="line ui-sortable-handle"><span class="label">Munin</span></li>
				<li id="colorwheel" class="line ui-sortable-handle"><span class="label">Colorwheel</span></li>
				<li id="spectrum14" class="line ui-sortable-handle"><span class="label">Spectrum14</span></li>

			</ul>
		</div>
	</div>
	<div id="slider"></div>
</div>

<script>


/* define color schemes: colorwheel, munin, spectrum14 */
var palette = new Rickshaw.Color.Palette({scheme: "munin"});

/* test */

	$('#colorwheel').click(function(){
		console.log('in function wheelchanger');
		palette = new Rickshaw.Color.Palette({scheme: "colorwheel"});
		$('#graph').empty().append('<div id="chart"></div>');
		console.log(palette.scheme);
		graph = new Rickshaw.Graph(content);
		graph.render();
	});



/* end test */



/* contains json */

var content = {
	element: document.getElementById("chart"),
	
	
	renderer: InsertTypeHere
	series: InsertValuesHere
	
	
};

/*
* @Desc changes format of xValues from Date into seconds and sets colorScheme
*/
function setFormat(){

	/* iterate over all timeseries */
	for(var j=0; j<content.series.length; j++){

		/* set color for each timeseries */
		content.series[j]["color"] = palette.color();

		/* iterate over all data of series */
		for(var k=0; k<content.series[0].data.length; k++){

			/* convert string into dateformat */
			var time = moment(content.series[j].data[k]["x"]);

			/* convert dateformat into seconds */
			var time = time._d.getTime()/1000;

			/* overwrite x-values of each data */
			content.series[j].data[k]["x"] = time;

			var yValue = parseFloat(content.series[j].data[k].x);
			content.series[j].data[k]["y"] = yValue;
		}
	}
}

/* call function for formatting dataformat */
setFormat();

/* instantiate new Graph */
var graph = new Rickshaw.Graph(content);


/*render Graph */
graph.render();

/* Create legend */
var legend = new Rickshaw.Graph.Legend( {
	graph: graph,
	element: document.getElementById("legend")

} );

/* Add visibility toggle */
var shelving = new Rickshaw.Graph.Behavior.Series.Toggle({
    graph: graph,
    legend: legend
});

/* Add series highlighting */
var lighlighter = new Rickshaw.Graph.Behavior.Series.Highlight({
	graph: graph,
	legend: legend
});

/* Add drag-drop to reorder stack */
var order = new Rickshaw.Graph.Behavior.Series.Order({
	graph: graph,
	legend: legend
});

/* Create Range selector */
var slider = new Rickshaw.Graph.RangeSlider({
	graph: graph,
	element: document.getElementById("slider")
})

/* add Hover Details */
var hoverDetail = new Rickshaw.Graph.HoverDetail({
	graph: graph
});



/* Add Axes */

/*
//var time = new Rickshaw.Fixtures.Time();
//var minutes = time.unit('year');
*/
var xAxis = new Rickshaw.Graph.Axis.Time({
	graph: graph
/*	timeUnit: minutes */
});


xAxis.render();

var yAxis = new Rickshaw.Graph.Axis.Y({
	graph: graph,
	orientation:"left",
	element: document.getElementById("y_Axis")
});

yAxis.render();

</script>

</body>

